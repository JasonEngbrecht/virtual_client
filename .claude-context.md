# Quick Context for Claude

**Project**: Virtual Client - Social work training with AI simulations  
**Current Phase**: MVP - Minimum Viable Conversation  
**Language**: Python 3.12 with FastAPI  
**Database**: PostgreSQL (or SQLite for MVP week)  
**LLM**: Anthropic Claude (Haiku for testing, Sonnet for production)  
**Testing**: pytest  
**IDE**: PyCharm on Windows  

## ğŸ¯ Current Task
MVP Week 1 Day 1-2: Build simplified session & message models

**Currently on Part 4**: Basic Session Service
- Create `session_service.py` with basic CRUD
- Methods: create_session, get_session, end_session
- Follow existing service patterns
- Test: Basic session creation/retrieval

**Part 1 Completed**: Session model updated with token tracking, removed unnecessary fields
**Part 2 Completed**: Message model created with foreign key to sessions, performance indexes, and comprehensive tests
**Part 3 Completed**: Database migration - messages table created with ORM, database reinitialized with correct schema

## âš¡ Critical MVP Patterns
- Messages in separate table (not JSON) for scale
- Token counting from day 1
- Simple session model (enhance later)
- Streamlit for rapid iteration
- Cost tracking built-in
- Focus on conversation quality

## ğŸ”‘ Existing Services to Reuse
```python
# From client_service
get(db, client_id)  # Get client for conversation
get_teacher_clients(db, teacher_id)  # List for testing

# From auth (mock for now)
get_current_teacher() -> TeacherAuth
get_current_student() -> StudentAuth
```

## ğŸ“ Project Structure
```
C:\Users\engbrech\Python\virtual_client\
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api/           # Existing endpoints
â”‚   â”œâ”€â”€ services/      # Add session_service.py
â”‚   â””â”€â”€ models/        # Add session.py
â”œâ”€â”€ mvp/               # NEW - Streamlit prototype
â”‚   â”œâ”€â”€ teacher_test.py
â”‚   â”œâ”€â”€ student_practice.py
â”‚   â””â”€â”€ admin_monitor.py
â””â”€â”€ tests/
    â””â”€â”€ integration/   # Minimal tests for MVP
```

## ğŸš€ Quick Start Commands
```bash
# Start API server (existing)
python start_server.py

# Run Streamlit apps (new) - LOCAL DEVELOPMENT
streamlit run mvp/teacher_test.py
streamlit run mvp/student_practice.py

# Run existing tests
python run_tests.py

# Deploy to Railway (when ready for external testing)
railway up
```

## ğŸ“‹ MVP Success Checklist
1. [ ] 10+ test conversations
2. [ ] <$0.01 per conversation
3. [ ] 5+ teacher feedback
4. [ ] Conversation quality validated
5. [ ] Technical feasibility proven
6. [ ] Clear Phase 2 requirements

## âš ï¸ MVP Constraints
- One client at a time for testing
- No rubric evaluation yet
- Basic UI (Streamlit)
- Manual feedback collection
- Limited to test users
- Local development first (deploy to Railway when ready)

---
*For detailed context see PROJECT_ROADMAP.md | For patterns see PATTERNS.md*