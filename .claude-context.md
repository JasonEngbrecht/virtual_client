# Quick Context for Claude

**Project**: Virtual Client - Social work training with AI simulations  
**Current Phase**: 1.5 - Assignment Management  
**Language**: Python 3.12 with FastAPI  
**Database**: SQLite with SQLAlchemy  
**Testing**: pytest  
**IDE**: PyCharm on Windows  

## 🎯 Current Task
Phase 1.5 Part 7: Student Assignment Viewing - Adding endpoints for students to view their assignments with proper filtering.

**Key Files**:
- To Update: `backend/api/student_routes.py` (add assignment viewing endpoints)
- Reference: `backend/services/assignment_service.py` (use existing methods)
- Reference: `backend/services/enrollment_service.py` (check student enrollment)
- To Create: `tests/integration/test_student_assignment_api.py` (student view tests)
- Reference: `backend/models/assignment.py` (Assignment models)
- Reference: `backend/services/section_service.py` (for section access)

## ⚡ Critical Patterns
- Assignments belong to sections (which belong to teachers)
- Assignment-Client is many-to-many with rubric per pair
- Practice vs Graded assignment types
- Published vs Draft states
- Available from/due date filtering
- Soft delete for assignment-client associations

## 🔑 Key Services Available
```python
# From section_service
get(db, section_id)  # Get section details
can_update(db, section_id, teacher_id)  # Permission check

# From client_service
get(db, client_id)  # Get client details
get_teacher_clients(db, teacher_id)  # List teacher's clients

# From rubric_service
get(db, rubric_id)  # Get rubric details
get_teacher_rubrics(db, teacher_id)  # List teacher's rubrics

# From enrollment_service
is_student_enrolled(db, section_id, student_id)  # Check enrollment
```

## 📁 Project Structure
```
C:\Users\engbrech\Python\virtual_client\
├── backend/
│   ├── api/
│   │   ├── teacher_routes.py  # Assignment CRUD endpoints
│   │   └── student_routes.py  # Student assignment viewing
│   ├── services/
│   │   ├── assignment_service.py  # NEW - Assignment logic
│   │   ├── section_service.py    # Section permissions
│   │   └── enrollment_service.py  # Student enrollment checks
│   └── models/
│       ├── assignment.py  # NEW - Assignment models
│       ├── course_section.py  # Section/Enrollment models
│       ├── client_profile.py  # Client model
│       └── rubric.py  # Rubric model
└── tests/
    └── integration/
        └── test_assignment_api.py  # NEW - Assignment tests
```

## 🚀 Quick Start Commands
```bash
# Start server
python start_server.py

# Run new tests (after creating)
python -m pytest tests/integration/test_assignment_api.py -v

# Quick regression test
python test_quick.py
```

## 📋 Implementation Checklist
1. [x] Part 1: Assignment Database Models
2. [x] Part 2: Assignment-Client Junction Model
3. [x] Part 3: Assignment Service Core
4. [x] Part 4: Assignment Teacher Endpoints
5. [x] Part 5: Assignment Publishing
6. [x] Part 6: Assignment-Client Management
7. [ ] Part 7: Student Assignment Viewing
8. [ ] Part 8: Testing & Documentation

---
*For detailed context see PROJECT_ROADMAP.md | For patterns see PATTERNS.md*